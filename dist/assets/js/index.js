import"swiper/css";import"../styles/reset.scss";import"../styles/style.scss";import Swiper from"swiper";import{Navigation}from"swiper/modules";import{languages}from"./languages";Swiper.use([Navigation]);const checkboxes={requirements:["minimum","recommended"],versions:["standard","limited"]};let isPlay=!1;const classes={opened:"opened",hidden:"hidden",active:"active"},values=[{price:29.99,title:"Digital Deluxe Edition"},{price:15.99,title:"Basic Edition"},{price:18.99,title:"Standard Edition"},{price:35.99,title:"buy dualsense with a game"}],checkbox=document.querySelectorAll(".checkbox"),header=document.querySelector(".header"),menuLink=document.querySelectorAll(".menu-link"),menuButton=document.querySelector(".header-menu__button"),video=document.getElementById("video"),videoButton=document.querySelector(".video-btn"),faqItem=document.querySelectorAll(".faq-item"),section=document.querySelectorAll(".section"),language=document.querySelectorAll(".language"),buyButton=document.querySelectorAll(".buy-button"),modal=document.querySelector(".modal"),overlay=document.querySelector(".overlay"),modalTitle=document.querySelector(".modal-version"),modalPrice=document.querySelector(".modal-total__price"),modalClose=document.querySelector(".modal-close"),toggleMenu=()=>header.classList.toggle(classes.opened),scrollToSection=e=>{e.preventDefault();const t=e.currentTarget.getAttribute("href");if(!t&&!t.startsWith("#"))return;const o=t.slice(1),l=document.getElementById(o)?.offsetTop||0;window.scrollTo({top:l,behavior:"smooth"})},formatValue=e=>e<10?`0${e}`:e,getTimerValues=e=>({seconds:e/1e3%60,minutes:e/6e4%60,hours:e/36e5%24,days:e/864e5}),setTimerValues=e=>{Object.entries(e).forEach((([e,t])=>{document.getElementById(e).innerText=formatValue(Math.floor(t))}))},startTimer=e=>{const t=setInterval((()=>{const o=new Date(e).getTime()-(new Date).getTime();o<0?clearInterval(t):setTimerValues(getTimerValues(o))}),1e3)},handleVideo=({target:e})=>{const t=e.parentElement;isPlay=!isPlay,t.classList.toggle(classes.hidden,isPlay),e.innerText=isPlay?"Pause":"Play",isPlay?video.play():video.pause()},handleCheckbox=({currentTarget:{checked:e,name:t}})=>{const{active:o}=classes,l=checkboxes[t][Number(e)],s=document.getElementById(l),n=document.querySelectorAll(`[data-${t}]`),a=s.parentElement.children;for(const e of a)e.classList.remove(o);for(const e of n)e.classList.remove(o),e.dataset[t]===l&&e.classList.add(o);s.classList.add(o)},initSlider=()=>{new Swiper(".swiper",{loop:!0,slidesPerView:3,spaceBetween:20,initialSlide:2,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})},handleFaqItem=({currentTarget:e})=>{e.classList.toggle(classes.opened);const t=e.classList.contains(classes.opened),o=e.querySelector("p").clientHeight;e.querySelector(".faq-item__content").style.height=`${t?o:0}px`},handleScroll=()=>{const{scrollY:e,innerHeight:t}=window;section.forEach((o=>{e>o.offsetTop-t/1.5&&o.classList.remove(classes.hidden)}))},setTexts=()=>{const e=localStorage.getItem("lang")||"en",t=languages[e];Object.entries(t).forEach((([e,t])=>{document.querySelectorAll(`[data-text="${e}"]`).forEach((e=>e.innerText=t))}))},toggleLanguage=({target:e})=>{const{lang:t}=e.dataset;t&&(localStorage.setItem("lang",t),setTexts())},handleBuyButton=({currentTarget:e})=>{const{value:t}=e.dataset;if(!t)return;const{price:o,title:l}=values[t];modalTitle.innerText=l,modalPrice.innerText=`${o}$`,modal.classList.add(classes.opened),overlay.classList.add(classes.opened)},closeModal=()=>{modal.classList.remove(classes.opened),overlay.classList.remove(classes.opened)};initSlider(),setTexts(),startTimer("May 19, 2024 00:00:00"),window.addEventListener("scroll",handleScroll),menuButton.addEventListener("click",toggleMenu),videoButton.addEventListener("click",handleVideo),menuLink.forEach((e=>e.addEventListener("click",scrollToSection))),checkbox.forEach((e=>e.addEventListener("click",handleCheckbox))),faqItem.forEach((e=>e.addEventListener("click",handleFaqItem))),language.forEach((e=>e.addEventListener("click",toggleLanguage))),buyButton.forEach((e=>e.addEventListener("click",handleBuyButton))),modalClose.addEventListener("click",closeModal);